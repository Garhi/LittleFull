<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Page</title>
    <link rel="stylesheet" href="./test.css">
    <link rel="icon" href="./icons/logo.svg" type="image/x-icon">
</head>

<body>
    <section id="faq">
        <div class="container">
            <h2>FAQ</h2>
            <div class="faq-list">
                <details class="faq-item">
                    <summary class="faq-question">
                        <span>小滿和市面上健康紀錄 app 有什麼不同？</span>
                        <img src="./icons/plus.svg" alt="展開" class="faq-icon plus">
                        <img src="./icons/minus.svg" alt="收合" class="faq-icon minus">
                    </summary>
                    <div class="faq-answer">
                        <p>「小滿」不只是紀錄工具，更是你的「看診助手」。我們專為照顧者設計，幫助你將繁瑣的健康資訊，整理成一份給醫生的「看診總表」，讓你不再手忙腳亂。</p>
                    </div>
                </details>
                <details class="faq-item">
                    <summary class="faq-question">
                        <span>我每天這麼忙，真的有時間用這個 App 嗎？紀錄會不會很麻煩？</span>
                        <img src="./icons/plus.svg" alt="展開" class="faq-icon plus">
                        <img src="./icons/minus.svg" alt="收合" class="faq-icon minus">
                    </summary>
                    <div class="faq-answer">
                        <p>我們知道你很忙。所以「小滿」主打「三秒紀錄」：你可以用語音講、用打勾選，或簡單填個數字。我們把麻煩留給 App，把輕鬆留給你。</p>
                    </div>
                </details>
                <details class="faq-item">
                    <summary class="faq-question">
                        <span>為什麼要用「小滿」來記錄？我用 LINE 或記事本也可以吧？</span>
                        <img src="./icons/plus.svg" alt="展開" class="faq-icon plus">
                        <img src="./icons/minus.svg" alt="收合" class="faq-icon minus">
                    </summary>
                    <div class="faq-answer">
                        <p>用 LINE 紀錄的資訊很分散。「小滿」能將所有資訊自動歸檔，並在你需要時，一鍵生成給醫生的「醫師報告卡」。這不僅方便你，也讓醫生能更快掌握狀況，提升看診效率。</p>
                    </div>
                </details>
                <details class="faq-item">
                    <summary class="faq-question">
                        <span>跟家人共享健康資料，會不會有隱私問題？如果不想給家人看到所有資料怎麼辦？</span>
                        <img src="./icons/plus.svg" alt="展開" class="faq-icon plus">
                        <img src="./icons/minus.svg" alt="收合" class="faq-icon minus">
                    </summary>
                    <div class="faq-answer">
                        <p>我們重視你的隱私。「小滿」提供「心意守護」功能，讓你可以決定哪些資料要共享、哪些要保留給自己。你可以設定不同的權限，確保在協作的同時，也能保護彼此的空間。</p>
                    </div>
                </details>
                <details class="faq-item">
                    <summary class="faq-question">
                        <span>這個 App 好用嗎？會不會很難學？</span>
                        <img src="./icons/plus.svg" alt="展開" class="faq-icon plus">
                        <img src="./icons/minus.svg" alt="收合" class="faq-icon minus">
                    </summary>
                    <div class="faq-answer">
                        <p>「小滿」的介面設計力求簡單、直覺，並且沒有複雜的文字。我們希望所有年齡層的家庭成員，都能輕鬆上手。我們也提供了溫和的導覽，幫助你一步步熟悉產品。</p>
                    </div>
                </details>
            </div>
        </div>
    </section>

    <script>
        document.querySelectorAll('.faq-item').forEach(function (faqItem) {
            const summary = faqItem.querySelector('.faq-question');
            const answer = faqItem.querySelector('.faq-answer');

            summary.addEventListener('click', function (event) {
                // 阻止 <details> 標籤的預設開合行為，我們自己接管
                event.preventDefault();

                if (faqItem.hasAttribute('open')) {
                    // --- 開始收合 ---
                    // 1. 先設定一個 height，讓 CSS transition 有起始值
                    requestAnimationFrame(function () {
                        answer.style.height = answer.scrollHeight + 'px';
                        requestAnimationFrame(function () {
                            answer.style.height = '0px';
                        });
                    });

                    // 2. 動畫結束後，移除 open 屬性和 height style
                    answer.addEventListener('transitionend', function () {
                        faqItem.removeAttribute('open');
                        answer.style.height = null;
                    }, { once: true });

                } else {
                    // --- 開始展開 ---
                    // 1. 加上 open 屬性
                    faqItem.setAttribute('open', '');

                    // 2. 計算內容的完整高度，並設定給 height 來觸發動畫
                    const fullHeight = answer.scrollHeight;
                    answer.style.height = fullHeight + 'px';

                    // 3. 動畫結束後，將 height 設為 auto，以應對視窗縮放等情況
                    answer.addEventListener('transitionend', function () {
                        answer.style.height = 'auto';
                    }, { once: true });
                }
            });
        });
    </script>
</body>

</html>